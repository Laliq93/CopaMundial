create or replace function insertarciudad(_nombre varchar, _poblacion integer, _descripcion varchar, _nombreingles varchar, _descripcioningles varchar)
RETURNS void AS
$$
BEGIN

   insert into ciudad values (nextval('ciudad_ci_id_seq'::regclass),_nombre,_poblacion,_descripcion,_nombreingles, _descripcioningles);
END;
$$ LANGUAGE plpgsql;


/*funcion eliminar ciudad*/

create or replace function eliminarciudad(id integer)
RETURNS void AS
$$
BEGIN

   delete from ciudad where ci_id = id;
END;
$$ LANGUAGE plpgsql;


/* funcion actualizar ciudad*/


create or replace function updateciudad(_id integer,_nombre varchar, _poblacion integer, _descripcion varchar, _nombreingles varchar, _descripcioningles varchar)
RETURNS void
AS
$$
BEGIN
	
	update ciudad set ci_nombre = _nombre, ci_poblacion = _poblacion, ci_descripcion = _descripcion, ci_nombreingles = _nombreingles,
	ci_descripcioningles = _descripcioningles
	where ci_id = _id;
	
END;
$$ LANGUAGE plpgsql;


create or replace function getciudad(_id integer)
RETURNS table(
	ci_id integer,
	ci_nombre varchar,
	ci_descripcion varchar,
	ci_poblacion integer,
	ci_nombreingles varchar,
	ci_descripcioningles varchar
)
AS
$$
BEGIN

	return query select ciudad.ci_id, ciudad.ci_nombre, ciudad.ci_descripcion, ciudad.ci_poblacion, ciudad.ci_nombreingles,ciudad.ci_descripcioningles from ciudad
	where ciudad.ci_id = _id; 
	
	
	
END;
$$ LANGUAGE plpgsql;


create or replace function getallciudad()
RETURNS table(
	ci_id integer,
	ci_nombre varchar,
	ci_descripcion varchar,
	ci_poblacion integer,
	ci_nombreingles varchar,
	ci_descripcioningles varchar
)
AS
$$
BEGIN

	return query select ciudad.ci_id, ciudad.ci_nombre, ciudad.ci_descripcion, ciudad.ci_poblacion, ciudad.ci_nombreingles,ciudad.ci_descripcioningles from ciudad; 
	
	
	
END;
$$ LANGUAGE plpgsql;

create or replace function getciudadbyname(_nombre varchar)
RETURNS table(
	ci_id integer,
	ci_nombre varchar,
	ci_descripcion varchar,
	ci_poblacion integer,
	ci_nombreingles varchar,
	ci_descripcioningles varchar
)
AS
$$
BEGIN

	return query select ciudad.ci_id, ciudad.ci_nombre, ciudad.ci_descripcion, ciudad.ci_poblacion, ciudad.ci_nombreingles,ciudad.ci_descripcioningles from ciudad
	where LOWER(_nombre) = LOWER(ciudad.ci_nombre);
	
	
	
END;
$$ LANGUAGE plpgsql;

create or replace function getciudadbynameingles(_nombre varchar)
RETURNS table(
	ci_id integer,
	ci_nombre varchar,
	ci_descripcion varchar,
	ci_poblacion integer,
	ci_nombreingles varchar,
	ci_descripcioningles varchar
)
AS
$$
BEGIN

	return query select ciudad.ci_id, ciudad.ci_nombre, ciudad.ci_descripcion, ciudad.ci_poblacion, ciudad.ci_nombreingles,ciudad.ci_descripcioningles from ciudad
	where LOWER(_nombre) = LOWER(ciudad.ci_nombreingles);
	
	
	
END;
$$ LANGUAGE plpgsql;
